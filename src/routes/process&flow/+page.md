# Process And Flow

## **1.** D·ª±a v√†o b√†i h·ªçc, check CPU, GPU, RAM, gi·∫£i th√≠ch v·ªÅ hi·ªáu nƒÉng c·ªßa m√°y t√≠nh m√† em ƒëang d√πng?

### üß† CPU:
- **L√µi (Core)**:
  - M·ªói l√µi l√† m·ªôt ƒë∆°n v·ªã x·ª≠ l√Ω ƒë·ªôc l·∫≠p c√≥ th·ªÉ th·ª±c hi·ªán c√°c t√°c v·ª• ri√™ng bi·ªát.
  - Nhi·ªÅu l√µi gi√∫p th·ª±c hi·ªán song song nhi·ªÅu t√°c v·ª• (ƒëa nhi·ªám t·ªët h∆°n).

- **Lu·ªìng (Thread)**:
  - Lu·ªìng l√† ƒë∆°n v·ªã nh·ªè h∆°n l√µi, ƒë∆∞·ª£c t·∫°o ra nh·ªù c√¥ng ngh·ªá si√™u ph√¢n lu·ªìng (Hyper-Threading) c·ªßa Intel ho·∫∑c SMT c·ªßa AMD.
  - M·ªói l√µi v·∫≠t l√Ω c√≥ th·ªÉ x·ª≠ l√Ω 2 lu·ªìng, gi√∫p t·∫≠n d·ª•ng t√†i nguy√™n l√µi hi·ªáu qu·∫£ h∆°n.

- **Xung nh·ªãp (Clock Speed)**:
  - Xung nh·ªãp c√†ng cao ‚Üí x·ª≠ l√Ω ƒë∆°n lu·ªìng c√†ng nhanh.
  - ·∫¢nh h∆∞·ªüng l·ªõn ƒë·∫øn game, ·ª©ng d·ª•ng ph·∫£n h·ªìi th·ªùi gian th·ª±c, v√† c√°c t√°c v·ª• ƒë∆°n lu·ªìng.

---

### üéÆ GPU:
- **Nh√¢n x·ª≠ l√Ω ƒë·ªì h·ªça (CUDA Cores / Stream Processors)**:
  - Gi√∫p GPU x·ª≠ l√Ω d·ªØ li·ªáu h√¨nh ·∫£nh v√† c√°c t√°c v·ª• song song nh∆∞ game, ƒë·ªì h·ªça, AI.

- **Xung nh·ªãp GPU (GPU Clock)**:
  - T·ªëc ƒë·ªô x·ª≠ l√Ω c·ªßa GPU, ·∫£nh h∆∞·ªüng ƒë·∫øn hi·ªáu nƒÉng khi ch∆°i game ho·∫∑c d·ª±ng video.

- **VRAM (Video RAM)**:
  - B·ªô nh·ªõ ƒë·ªì h·ªça chuy√™n d·ª•ng ƒë·ªÉ l∆∞u h√¨nh ·∫£nh, texture, m√¥ h√¨nh 3D,...
  - Dung l∆∞·ª£ng l·ªõn h∆°n gi√∫p ch·∫°y t·ªët c√°c ph·∫ßn m·ªÅm thi·∫øt k·∫ø ho·∫∑c game n·∫∑ng.

- **H·ªó tr·ª£ c√¥ng ngh·ªá**:
  - Ray Tracing, DLSS (NVIDIA), FidelityFX (AMD), CUDA (AI), v.v. gi√∫p tƒÉng ch·∫•t l∆∞·ª£ng h√¨nh ·∫£nh v√† hi·ªáu su·∫•t.

---

### üíæ RAM:
- **Dung l∆∞·ª£ng**:
  - RAM c√†ng nhi·ªÅu ‚Üí c√†ng t·ªët cho ƒëa nhi·ªám, m·ªü nhi·ªÅu ·ª©ng d·ª•ng c√πng l√∫c.
  - 8GB: t·∫°m ƒë·ªß cho vƒÉn ph√≤ng; 16GB: t·ªët cho h·ªçc t·∫≠p, game; 32GB+: cho ƒë·ªì h·ªça, l·∫≠p tr√¨nh, m√¥ ph·ªèng.

- **T·ªëc ƒë·ªô (MHz)**:
  - RAM nhanh h∆°n gi√∫p tƒÉng t·ªëc ƒë·ªô truy xu·∫•t d·ªØ li·ªáu, c·∫£i thi·ªán hi·ªáu nƒÉng h·ªá th·ªëng.

- **Lo·∫°i RAM**:
  - DDR3 (c≈©), DDR4 (ph·ªï bi·∫øn), DDR5 (m·ªõi, nhanh h∆°n).

---

### üîç ƒê√°nh gi√° hi·ªáu nƒÉng t·ªïng th·ªÉ:

- [M√°y 1: Tr·∫ßn B√° Minh ƒê·ª©c](#m√°y-1)
- [M√°y 2: ƒê·ªìng ƒê·∫°o Minh	D≈©ng](#m√°y-2)

### M√°y 1
- **CPU: Intel Core i5-12500H (12 l√µi / 16 lu·ªìng, 2.50GHz)** ‚Üí R·∫•t m·∫°nh m·∫Ω cho h·∫ßu h·∫øt t√°c v·ª•
- **GPU: Intel Iris Xe / NVIDIA Geoforce RTX 3050 Laptop GPU** ‚Üí D√πng t·ªët cho ƒë·ªì h·ªça t·∫ßm trung, ch∆°i game ·ªü m·ª©c cao.
- **RAM: 16GB DDR4** ‚Üí Ph√π h·ª£p v·ªõi ƒëa nhi·ªám trung, c√≥ th·ªÉ n√¢ng c·∫•p th√™m n·∫øu c√≥ nhu c·∫ßu ƒëa nhi·ªám cao h∆°n.

üí° *K·∫øt lu·∫≠n*: M√°y c·ªßa em ph√π h·ª£p cho h·ªçc t·∫≠p v√† l√†m vi·ªác ·ªü m·ª©c trung b√¨nh t·ªõi cao.

### M√°y 2
- **CPU: Intel Core i5-12500H (12 l√µi / 16 lu·ªìng, 2.50GHz)** ‚Üí R·∫•t m·∫°nh m·∫Ω cho h·∫ßu h·∫øt t√°c v·ª•
- **GPU: Intel Iris Xe / NVIDIA Geoforce RTX 3050 Laptop GPU** ‚Üí D√πng t·ªët cho ƒë·ªì h·ªça t·∫ßm trung, ch∆°i game ·ªü m·ª©c cao.
- **RAM: 16GB DDR4** ‚Üí Ph√π h·ª£p v·ªõi ƒëa nhi·ªám trung, c√≥ th·ªÉ n√¢ng c·∫•p th√™m n·∫øu c√≥ nhu c·∫ßu ƒëa nhi·ªám cao h∆°n.

üí° *K·∫øt lu·∫≠n*: M√°y c·ªßa em ph√π h·ª£p cho h·ªçc t·∫≠p v√† l√†m vi·ªác ·ªü m·ª©c trung b√¨nh t·ªõi cao.

---

 ## **2.** C√°c b√†i to√°n ph·ªï bi·∫øn v√† ·ª©ng d·ª•ng ƒëa lu·ªìng / ƒëa ti·∫øn tr√¨nh

 ### üîÑ Ph√¢n bi·ªát: 
    > ƒêa lu·ªìng (Multithreading): T·ªët cho x·ª≠ l√Ω song song nh·∫π, chia s·∫ª b·ªô nh·ªõ, hi·ªáu qu·∫£ v·ªõi CPU ƒëa l√µi.
 
    > ƒêa ti·∫øn tr√¨nh (Multiprocessing): T·ªët cho x·ª≠ l√Ω ƒë·ªôc l·∫≠p, tr√°nh l·ªói treo to√†n b·ªô ch∆∞∆°ng tr√¨nh n·∫øu m·ªôt ph·∫ßn l·ªói.

 | **STT** | **B√†i to√°n / ·ª®ng d·ª•ng**                              | **S·ª≠ d·ª•ng ƒëa lu·ªìng / ƒëa ti·∫øn tr√¨nh ·ªü ƒë√¢u?**                                        |
| ------- | ---------------------------------------------------- | ---------------------------------------------------------------------------------- |
| 1     | **Web Server (X·ª≠ l√Ω nhi·ªÅu y√™u c·∫ßu HTTP)**            | M·ªói k·∫øt n·ªëi kh√°ch h√†ng c√≥ th·ªÉ d√πng 1 lu·ªìng ho·∫∑c 1 ti·∫øn tr√¨nh ri√™ng.                |
| 2     | **T√¨m ki·∫øm vƒÉn b·∫£n (Text Search Engine)**            | Chia nh·ªè t·∫≠p d·ªØ li·ªáu v√† t√¨m song song tr√™n nhi·ªÅu lu·ªìng/ti·∫øn tr√¨nh.                 |
| 3     | **X·ª≠ l√Ω ·∫£nh / video (Image/Video Processing)**       | √Åp d·ª•ng hi·ªáu ·ª©ng, chuy·ªÉn ƒë·ªïi m√†u, resize t·ª´ng ph·∫ßn ·∫£nh/video song song.            |
| 4     | **D·ª± ƒëo√°n b·∫±ng m√¥ h√¨nh AI / Machine Learning**       | Training s·ª≠ d·ª•ng ƒëa ti·∫øn tr√¨nh ƒë·ªÉ x·ª≠ l√Ω batch d·ªØ li·ªáu; inference chia ra ƒëa lu·ªìng. |
| 5     | **N√©n v√† gi·∫£i n√©n d·ªØ li·ªáu (Compression)**            | Chia file th√†nh c√°c ph·∫ßn nh·ªè, x·ª≠ l√Ω song song.                                     |
| 6     | **Bi√™n d·ªãch m√£ ngu·ªìn (Compilers)**                   | Bi√™n d·ªãch c√°c file ƒë·ªôc l·∫≠p ho·∫∑c ph√¢n t√≠ch m√£ ngu·ªìn song song.                      |
| 7     | **Ph√¢n t√≠ch d·ªØ li·ªáu l·ªõn (Big Data Analytics)**       | Ch·∫°y song song tr√™n Spark / Hadoop b·∫±ng ƒëa ti·∫øn tr√¨nh ph√¢n t√°n.                    |
| 8     | **Game Engine (X·ª≠ l√Ω v·∫≠t l√Ω, AI, ƒë·ªì h·ªça, √¢m thanh)** | M·ªói th√†nh ph·∫ßn (v·∫≠t l√Ω, AI, √¢m thanh, input) c√≥ th·ªÉ ch·∫°y tr√™n lu·ªìng ri√™ng.         |
| 9     | **Tr√¨nh duy·ªát web (Web Browsers)**                   | M·ªói tab ho·∫∑c plugin ch·∫°y tr√™n ti·∫øn tr√¨nh ri√™ng, rendering v√† JS x·ª≠ l√Ω ƒëa lu·ªìng.    |
| 10      | **Ph√°t hi·ªán virus / malware (Antivirus Engine)**     | Qu√©t t·ª´ng file trong h·ªá th·ªëng song song b·∫±ng nhi·ªÅu lu·ªìng.                          |
| 11  | **Ph·∫ßn m·ªÅm d·ª±ng phim, render 3D**                    | Render m·ªói khung h√¨nh ho·∫∑c pixel b·∫±ng nhi·ªÅu lu·ªìng ho·∫∑c GPU threads.                |
| 12  | **C∆° s·ªü d·ªØ li·ªáu (Database Engines)**                 | M·ªói truy v·∫•n c√≥ th·ªÉ l√† 1 lu·ªìng, x·ª≠ l√Ω ƒë·ªçc/ghi song song ƒë·ªÉ tƒÉng t·ªëc ƒë·ªô ph·∫£n h·ªìi.   |

---

## **3.** Vi·∫øt ra gi·∫•y r·ªìi ch·ª•p ·∫£nh, li·ªát k√™ c√°c tr∆∞·ªùng h·ª£p n√†o th√¨ n√™n d√πng thread, tr∆∞·ªùng h·ª£p n√†o n√™n d√πng process, khi n√†o th√¨ n√™n d√πng c·∫£ hai. Vi·∫øt d∆∞·ªõi d·∫°ng table v√† ƒë∆∞a v√≠ d·ª• c√°c b√†i to√°n

![Place Holder1](static/images/b3.jpg)
---

## **4:** Report ‚Äì T√¨m hi·ªÉu ChatGPT training t·∫≠p d·ªØ li·ªáu l·ªõn b·∫±ng Distributed System nh∆∞ th·∫ø n√†o

---

### üß† T·ªïng quan

ChatGPT l√† m·ªôt m√¥ h√¨nh ng√¥n ng·ªØ l·ªõn (Large Language Model ‚Äì LLM) ƒë∆∞·ª£c hu·∫•n luy·ªán tr√™n t·∫≠p d·ªØ li·ªáu kh·ªïng l·ªì v·ªõi h√†ng trƒÉm t·ª∑ token. ƒê·ªÉ hu·∫•n luy·ªán m√¥ h√¨nh c√≥ quy m√¥ nh∆∞ v·∫≠y, OpenAI s·ª≠ d·ª•ng h·ªá th·ªëng ph√¢n t√°n (distributed system) nh·∫±m:

- T·ªëi ∆∞u hi·ªáu su·∫•t t√≠nh to√°n
- TƒÉng t·ªëc ƒë·ªô hu·∫•n luy·ªán
- Qu·∫£n l√Ω b·ªô nh·ªõ hi·ªáu qu·∫£
- T·∫≠n d·ª•ng t√†i nguy√™n GPU/TPU cao c·∫•p

---

### ‚öôÔ∏è C√°c ph∆∞∆°ng ph√°p h·ªá th·ªëng ph√¢n t√°n trong hu·∫•n luy·ªán ChatGPT

#### 1. **Song song d·ªØ li·ªáu (Data Parallelism)**
- Sao ch√©p to√†n b·ªô m√¥ h√¨nh tr√™n nhi·ªÅu GPU.
- Chia nh·ªè d·ªØ li·ªáu th√†nh t·ª´ng l√¥ (batch) cho m·ªói GPU x·ª≠ l√Ω ƒë·ªôc l·∫≠p.
- K·∫øt qu·∫£ ƒë∆∞·ª£c t·ªïng h·ª£p l·∫°i sau m·ªói b∆∞·ªõc hu·∫•n luy·ªán.

#### 2. **Song song m√¥ h√¨nh (Model Parallelism)**
- M√¥ h√¨nh qu√° l·ªõn kh√¥ng th·ªÉ ch·ª©a trong m·ªôt GPU ‚Üí chia m√¥ h√¨nh th√†nh nhi·ªÅu ph·∫ßn.
- M·ªói ph·∫ßn m√¥ h√¨nh ch·∫°y tr√™n m·ªôt GPU kh√°c nhau.
- Gi√∫p t·∫≠n d·ª•ng t·ªëi ƒëa b·ªô nh·ªõ GPU.

#### 3. **Song song pipeline (Pipeline Parallelism)**
- Chia qu√° tr√¨nh hu·∫•n luy·ªán th√†nh c√°c giai ƒëo·∫°n (stages).
- M·ªói GPU x·ª≠ l√Ω m·ªôt giai ƒëo·∫°n kh√°c nhau theo ki·ªÉu "d√¢y chuy·ªÅn".

#### 4. **K·∫øt h·ª£p song song ƒëa t·∫ßng (Hybrid Parallelism)**
- K·∫øt h·ª£p data, model, v√† pipeline parallelism.
- Gi√∫p t·ªëi ∆∞u h√≥a cho c√°c m√¥ h√¨nh c·ª±c l·ªõn nh∆∞ GPT-3 ho·∫∑c GPT-4.

---

### üß∞ C√¥ng c·ª• v√† n·ªÅn t·∫£ng h·ªó tr·ª£

| C√¥ng c·ª•         | Vai tr√≤ ch√≠nh |
|----------------|---------------|
| **DeepSpeed**  | T·ªëi ∆∞u h√≥a hu·∫•n luy·ªán m√¥ h√¨nh l·ªõn, h·ªó tr·ª£ memory-efficient training |
| **Ray**        | N·ªÅn t·∫£ng t√≠nh to√°n ph√¢n t√°n m·∫°nh m·∫Ω, d√πng cho c·∫£ training v√† inference |
| **Horovod**    | Framework ph·ªï bi·∫øn h·ªó tr·ª£ song song d·ªØ li·ªáu trong TensorFlow / PyTorch |
| **TPU/GPU clusters** | H·∫° t·∫ßng ph·∫ßn c·ª©ng v·ªõi m·∫°ng t·ªëc ƒë·ªô cao v√† h√†ng ng√†n GPU |

---

### üèóÔ∏è H·∫° t·∫ßng ph·∫ßn c·ª©ng

- S·ª≠ d·ª•ng h√†ng **ngh√¨n GPU A100 / TPUv4** trong c√°c trung t√¢m d·ªØ li·ªáu.
- H·ªá th·ªëng **m·∫°ng InfiniBand / NVLink** t·ªëc ƒë·ªô cao gi·ªØa c√°c GPU.
- **B·ªô nh·ªõ ƒë·ªám ph√¢n t√°n** ƒë·ªÉ gi·∫£m ƒë·ªô tr·ªÖ truy·ªÅn d·ªØ li·ªáu.

---

### üìö Ngu·ªìn t√†i li·ªáu tham kh·∫£o

1. [How ChatGPT and our foundation models are developed ‚Äì OpenAI](https://help.openai.com/en/articles/7842364-how-chatgpt-and-our-foundation-models-are-developed)

2. [How Ray, a Distributed AI Framework, Helps Power ChatGPT ‚Äì The New Stack](https://thenewstack.io/how-ray-a-distributed-ai-framework-helps-power-chatgpt/)

3. [DeepSpeed-Chat: RLHF training of ChatGPT-like models ‚Äì arXiv](https://arxiv.org/abs/2308.01320)

4. [How ChatGPT System Design Works ‚Äì Educative.io](https://www.educative.io/blog/how-chatgpt-system-design-works)

---

### ‚úÖ K·∫øt lu·∫≠n

Vi·ªác hu·∫•n luy·ªán ChatGPT l√† m·ªôt qu√° tr√¨nh r·∫•t ph·ª©c t·∫°p v√† ƒë√≤i h·ªèi h·ªá th·ªëng ph√¢n t√°n ·ªü c·∫•p ƒë·ªô si√™u m√°y t√≠nh. Nh·ªù s·ª± k·∫øt h·ª£p c·ªßa c√°c k·ªπ thu·∫≠t ph√¢n t√°n ti√™n ti·∫øn v√† h·∫° t·∫ßng m·∫°nh m·∫Ω, OpenAI c√≥ th·ªÉ hu·∫•n luy·ªán nh·ªØng m√¥ h√¨nh c√≥ h√†ng trƒÉm t·ª∑ tham s·ªë m·ªôt c√°ch hi·ªáu qu·∫£ v√† t·ªëi ∆∞u.
